<app-file-upload (filesSelected)="onFilesSelected($event)"></app-file-upload>
<div class="create-ticket-container">
  <h2>{{ 'create_ticket.title' | translate }}</h2>
  <form [formGroup]="createTicketForm" (ngSubmit)="onSubmit()">
    
    <mat-form-field appearance="fill">
      <mat-label>{{ 'create_ticket.form.title' | translate }}</mat-label>
      <input matInput formControlName="title" required />
      <mat-error *ngIf="createTicketForm.get('title')?.invalid">{{ 'create_ticket.errors.title_required' | translate }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>{{ 'create_ticket.form.description' | translate }}</mat-label>
      <textarea matInput formControlName="issue_description" required></textarea>
      <mat-error *ngIf="createTicketForm.get('issue_description')?.invalid">{{ 'create_ticket.errors.description_required' | translate }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>{{ 'create_ticket.form.serial_number' | translate }}</mat-label>
      <input matInput formControlName="serial_number" required />
      <mat-error *ngIf="createTicketForm.get('serial_number')?.invalid">{{ 'create_ticket.errors.serial_number_required' | translate }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>{{ 'create_ticket.form.brand' | translate }}</mat-label>
      <input matInput formControlName="brand" required />
      <mat-error *ngIf="createTicketForm.get('brand')?.invalid">{{ 'create_ticket.errors.brand_required' | translate }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>{{ 'create_ticket.form.priority' | translate }}</mat-label>
      <mat-select formControlName="priority" required>
        <mat-option value="low">{{ 'create_ticket.form.priority' | translate }}: Low</mat-option>
        <mat-option value="medium">{{ 'create_ticket.form.priority' | translate }}: Medium</mat-option>
        <mat-option value="high">{{ 'create_ticket.form.priority' | translate }}: High</mat-option>
      </mat-select>
      <mat-error *ngIf="createTicketForm.get('priority')?.invalid">{{ 'create_ticket.errors.priority_required' | translate }}</mat-error>
    </mat-form-field>

    <mat-checkbox formControlName="is_under_warranty">{{ 'create_ticket.form.is_under_warranty' | translate }}</mat-checkbox>

    <mat-checkbox formControlName="accept_conditions" required>
      {{ 'create_ticket.form.accept_conditions' | translate }}
    </mat-checkbox>
    <mat-error *ngIf="createTicketForm.get('accept_conditions')?.invalid">{{ 'create_ticket.errors.accept_conditions_required' | translate }}</mat-error>

    <div *ngIf="selectedFiles.length > 0">
      <h4>{{ 'create_ticket.form.selected_files' | translate }}</h4>
      <ul>
        <li *ngFor="let file of selectedFiles">{{ file.name }}</li>
      </ul>
    </div>

    <button mat-raised-button type="submit" [disabled]="createTicketForm.invalid">{{ 'create_ticket.form.submit' | translate }}</button>
  </form>
</div>
